/* src/pages/HistoryPage.css */

/* ======================================= */
/* CONTENEDOR PRINCIPAL Y CARD */
/* ======================================= */

.history-page-container {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    width: 100%;
    margin-top: 5vh;
    margin-bottom: 5vh;
}

.history-card {
    background-color: white;
    padding: 1.5rem;
    border-radius: 1rem;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    width: 90%;
    max-width: 1000px;
}

.history-title {
    font-size: 1.5rem;
    font-weight: bold;
    color: #333;
    margin: 1rem 0;
}

/* ------------------ FILTROS ------------------ */

.history-filters {
    display: flex;
    gap: 0.8rem;
    margin-bottom: 1.5rem;
}

.date-input {
    padding: 0.6rem;
    border: 1px solid #ccc;
    border-radius: 4px;
    flex-grow: 1;
    max-width: 300px;
}

.filter-btn {
    padding: 0.6rem 1.5rem;
    background-color: #10b981;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
}

/* ======================================= */
/* GRID DE CONTENIDO */
/* ======================================= */

.history-grid {
    display: grid;
    grid-template-columns: 1fr 1fr; /* Dos columnas principales */
    gap: 1.5rem;
}

/* ------------------ LADO IZQUIERDO: DETALLES ------------------ */

.details-panel {
    border: 1px solid #eee;
    border-radius: 0.75rem;
    padding: 1rem;
}

.selected-date-display {
    font-size: 1.2rem;
    font-weight: bold;
    margin-bottom: 1rem;
}

.food-list-details {
    /* Mantenemos los estilos de lista que ya tienes */
    margin-bottom: 1rem; /* Espacio antes del total */
    
    /* ⭐️ RESTRICCIÓN DE ALTURA Y SCROLL INTERNO ⭐️ */
    max-height: 320px; /* Altura máxima para aproximadamente 8 elementos */
    overflow-y: auto; /* Activa el scroll vertical */
}

.food-item-row {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 0.5rem;
    border-bottom: 1px dashed #eee;
}

.food-name {
    color: #555;
}

.food-calories {
    font-weight: 600;
}

.progress-area {
    display: flex;
    align-items: center;
    justify-content: flex-end; /* Alinea el progreso a la derecha */
    gap: 1rem;
    margin: 1.5rem 0;
    padding-top: 1rem;
    border-top: 1px solid #eee;
}

.circular-chart-wrapper {
    /* Contenedor del gráfico, asumimos que CalorieCircularChart maneja el tamaño */
    transform: scale(0.8); /* Lo hacemos un poco más pequeño para que quepa */
}

.excess-message {
    color: #cc0000;
    font-weight: bold;
    font-size: 1rem;
}

.total-row {
    display: flex;
    justify-content: space-between;
    font-size: 1.2rem;
    font-weight: bold;
    padding-top: 1rem;
}

/* ------------------ LADO DERECHO: GRÁFICAS ------------------ */

.summary-area {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.macro-history-panel {
    border: 1px solid #eee;
    border-radius: 0.75rem;
    padding: 1rem;
    height: 300px; /* Altura fija para el gráfico */
}

.history-message {
    border: 1px solid #eee;
    border-radius: 0.75rem;
    padding: 1rem;
    height: 150px; /* Altura del panel de mensajes */
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
}

.chart-placeholder {
    color: #aaa;
    font-style: italic;
    text-align: center;
}

/* DARK MODE SETTINGS*/

/* ------------------ TARJETA Y FONDOS ------------------ */

/* Estilos de la tarjeta principal (coincide con dashboard-card) */
body.dark-mode .history-card {
    background-color: #0F172A; /* Fondo de tarjeta oscuro */
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
}

body.dark-mode .history-title,
body.dark-mode .selected-date-display,
body.dark-mode .total-row span {
    color: #E6EEF8;
}

body.dark-mode .app-title{
    color: #E6EEF8;
}

/* ------------------ FILTROS E INPUTS ------------------ */

body.dark-mode .date-input {
    background-color: #1F2A37;
    border-color: #3B4958; /* Borde de gris oscuro/azul */
    color: #E6EEF8;
}

body.dark-mode .date-input::placeholder {
    color: #94A3B8;
}

body.dark-mode .filter-btn {
    background-color: #10b981; /* Verde (color de acción) */
    color: #0F172A; /* Texto oscuro en botón brillante */
}

/* ------------------ PANELES INTERNOS Y LISTA ------------------ */

.details-panel,
.macro-history-panel,
.history-message {
    border: 1px solid #eee;
}

body.dark-mode .details-panel,
body.dark-mode .macro-history-panel,
body.dark-mode .history-message {
    background-color: #1F2A37;
    border: 1px solid #1F2A37; /* Usar el mismo color del fondo del panel para un aspecto plano */
}

/* Texto de No Data */
body.dark-mode .no-data-message,
body.dark-mode .chart-placeholder {
    color: #94A3B8;
}

/* ------------------ LISTA DE ALIMENTOS DETALLADA ------------------ */

body.dark-mode .food-item-row {
    border-bottom: 1px dashed #3B4958; /* Divisor más suave */
}

body.dark-mode .food-item-row span {
    color: #E6EEF8;
}

body.dark-mode .food-item-row .food-name {
    color: #94A3B8; /* Nombres de comida ligeramente más tenues */
}

/* ------------------ GRÁFICAS Y MENSAJES ------------------ */

body.dark-mode .excess-message {
    /* Mantener rojo brillante para alerta */
    color: #FF6B6B; 
}

body.dark-mode .motivational-text {
    color: #E6EEF8;
}

/* RESPONSIVE */

@media (max-width: 768px) {
    .history-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    
    /* 1. Contenedor principal de la tarjeta: Aseguramos que ocupe todo el ancho disponible */
    .history-page-container {
        /* Eliminamos el min-height: 100vh para permitir el scroll vertical natural */
        min-height: auto; 
        padding: 1rem 0; /* Añadimos padding vertical solo al contenedor de la página */
    }

    .history-card {
        width: 90%; /* Ocupa todo el ancho */
        max-width: none;
        padding: 1rem; /* Reducimos el padding interno */
    }

    /* 2. Grid de Contenido: Colapsamos a una sola columna */
    .history-grid {
        grid-template-columns: 1fr; /* ⭐️ Colapsa a una sola columna ⭐️ */
        gap: 1.5rem;
    }

    /* 3. Filtros: Ocupan todo el ancho y los inputs se apilan si es necesario */
    .history-filters {
        flex-direction: column; /* Apila el selector de fecha y el botón FILTER */
    }
    
    .date-input {
        max-width: none; /* Permite que el input ocupe el 100% del ancho */
    }
    
    .progress-area {
        /* Aseguramos que la gráfica circular (lado derecho del panel) se centre o se apile si es necesario */
        flex-direction: column; 
        justify-content: center;
        align-items: center; 
        gap: 1rem;
    }
    
    .circular-chart-wrapper {
        /* Quitamos el scaling para que se vea más grande en móvil */
        transform: scale(1.0); 
    }

    /* 5. Paneles de Gráficos (summary-area): Se apilan debajo del panel de detalles */
    .summary-area {
        gap: 1.5rem;
        /* No requiere modificaciones si flex-direction: column está definido y está en la segunda fila del grid */
    }
    
    .macro-history-panel {
        height: 300px; /* Reducimos ligeramente la altura de la gráfica de macros */
        padding-bottom: 1rem;
    }

    .macro-chart-container{
        padding-bottom: 1rem;
    }
}