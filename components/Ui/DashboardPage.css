/* ======================================= */
/* CONTENEDOR PRINCIPAL */
/* ======================================= */

.dashboard-page-container {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    width: 100%;
    margin-top: 5vh;
    margin-bottom: 5vh;
}


.dashboard-card {
    background-color: white;
    padding: 1.5rem;
    border-radius: 1rem;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    width: 90%;
    max-width: 900px; /* Tamaño más grande para el dashboard */
}

/* ======================================= */
/* ENCABEZADO Y GRID */
/* ======================================= */

.dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 1rem;
    border-bottom: 1px solid #eee;
}

/* ⭐️ NUEVO: Grupo de botones para alineación ⭐️ */
.buttons-group-wrapper {
    display: flex;
    align-items: center;
    gap: 0.5rem; /* Espacio entre los botones de regreso y configuración */
}


/* ⭐️ NUEVO: Estilo del botón de regreso ⭐️ */
/*.back-btn {
    background: none;
    border: 1px solid #ccc;
    border-radius: 10%;
    width: 30px;
    height: 30px;
    font-size: 1.2rem;
    line-height: 1;
    cursor: pointer;
    color: #333;
    transition: background-color 0.2s;
    margin-right: 1rem; /* Espacio antes del logo 
}*/

/* ⭐️ ESTILO BASE PARA ÍCONOS (Aplica a Regreso y Configuración) ⭐️ */
.settings-icon-btn {
    background: none;
    border: none;
    padding: 0;
    width: 30px;
    height: 30px;
    font-size: 1.2rem;
    line-height: 1;
    cursor: pointer;
    color: #333;
    transition: background-color 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.settings-icon-btn:hover {
    background-color: #f0f0f0;
    border-radius: 20%; /* Añadimos un círculo sutil al pasar el mouse */
}

.back-btn:hover {
    background-color: #f0f0f0;
}

/* Ajustamos el layout del header para acomodar el botón */
.dashboard-header {
    /* Usaremos flexbox para alinear el botón, logo, y el menú */
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.header-info {
    /* Asegura que el logo y el título sigan juntos */
    display: flex;
    align-items: center;
}

span{
    color: black;
}

.header-info {
    display: flex;
    align-items: center;
}

.app-title {
    font-size: 1.5rem;
    font-weight: bold;
    margin-left: 0.5rem;
}

.dashboard-title {
    font-size: 1.2rem;
    font-weight: 500;
    color: black;
    margin: 1rem 0;
}

.dashboard-title h2{
    color: black;
}

.dashboard-grid {
    display: grid;
    /* 2 columnas en desktop */
    grid-template-columns: 1fr 1fr; 
    grid-template-rows: auto auto;
    gap: 1rem;
    /* ⭐️ NUEVO: Añadimos margen inferior para separarlo del Historial que vendrá después */
    margin-bottom: 1rem;
}

/* ------------------ MENÚ DE AJUSTES ------------------ */
.settings-menu-wrapper {
    position: relative; /* Contexto para el dropdown */
}

.settings-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #333;
}

.settings-dropdown {
    position: absolute;
    top: 100%; /* Justo debajo del botón */
    right: 0;
    z-index: 100;
    background-color: white;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    min-width: 150px;
    display: flex;
    flex-direction: column;
}

.settings-dropdown button {
    background: none;
    border: none;
    padding: 0.5rem 1rem;
    text-align: left;
    cursor: pointer;
    font-size: 0.9rem;
    color: #333;
}

.settings-dropdown button:hover {
    background-color: #f0f0f0;
}

/* ======================================= */
/* PANELES INDIVIDUALES */
/* ======================================= */

.summary-panel,
.history-panel,
.food-entry-panel,
.message-panel {
    background-color: #f9f9f9;
    padding: 1rem;
    border-radius: 0.75rem;
    border: 1px solid #eee;
    color: black;
}

/* ------------------ RESUMEN CALÓRICO ------------------ */
.summary-panel {
    background-color: #f9f9f9;
    padding: 1rem;
    border-radius: 0.75rem;
    border: 1px solid #eee;
    
    /* ESTRUCTURA FLEXIBLE PARA EL PANEL PRINCIPAL: Lado Izquierdo vs Gráfico */
    display: flex; 
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
}

.summary-info-left {
    display: flex;
    flex-direction: column;
    text-align: left;
    gap: 0.25rem;
    min-width: 180px; /* Evita que el texto se comprima demasiado */
}

.calorie-goal {
    font-size: 1.8rem;
    font-weight: bold;
    color: #333;
    margin: 0;
}

.summary-divider {
    border: 0;
    height: 1px;
    background: #ccc;
    margin: 0.5rem 0;
}

/* Columna 1 */
.summary-panel-wrapper {
    grid-column: 1 / 2; 
    grid-row: 1 / 2;
}

.food-entry-panel {
    grid-column: 1 / 2; 
    grid-row: 2 / 3; /* Sigue ocupando dos filas */
}

/* Columna 2: Swap de posiciones */

/* ⭐️ NUEVA POSICIÓN: Fila 1 (Top Right) */
.macro-panel {
    grid-column: 2 / 3; 
    grid-row: 1 / 2; /* Ahora ocupa la Fila 1 */
    /* ... (estilos de panel) ... */
    overflow: hidden; 
}

/* ⭐️ NUEVA POSICIÓN: Fila 2 (Middle Right) */
.history-panel {
    /*grid-column: 2 / 3; 
    grid-row: 2 / 3; /* Ahora ocupa la Fila 2 */
    /* ... (estilos de panel) ... */

    /* ESTILOS DE PANEL */
    /*background-color: #f9f9f9;
    padding: 1rem;
    border-radius: 0.75rem;
    border: 1px solid #eee;
    color: black;*/

    /* LAYOUT INTERNO */
    display: block;
   /*flex-direction: column; 
    height: auto;*/ /* Permite que el contenido interno (el gráfico) se estire */
}

.message-panel {
    grid-column: 2 / 3; 
    grid-row: 3 / 4; /* Sigue ocupando la Fila 3 */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* ------------------ HISTORIAL (Gráfico de Barras) ------------------ */
/*.history-panel {
    grid-column: 2; 
    grid-row: 1; 
    padding: 1rem;
    display: flex;
    flex-direction: column;
}*/

.full-width-panel {
    width: 95%;
    margin-top: 1rem; /* Espacio entre el Grid y el Historial */
    padding: 1rem;
    border-radius: 0.75rem;
    border: 1px solid #eee;
    background-color: #f9f9f9;

    /* ⭐️ CENTRADO HORIZONTAL DEL CONTENIDO ⭐️ */
    display: flex;
    flex-direction: column;
    align-items: center; /* Alinea los elementos hijos (título, gráfico, botón) al centro */
    
}

.history-chart-mock {
    height: 150px;
    display: flex;
    align-items: flex-end;
    gap: 0.5rem;
    justify-content: space-around;
}

.history-chart-mock-container {
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* Empuja el botón y el título a los bordes */
    height: 100%;
    flex-grow: 1;
    text-align: center;
}

.bar {
    width: 25px; 
    background-color: #3b82f6; 
    border-radius: 4px;
    transition: height 0.5s;
    /* La altura es controlada por el style en el componente React */
    margin-bottom: 3px; /* Espacio entre la barra y la etiqueta */
}

.bar-chart-visualization {
    min-height: 80px; /* Garantiza altura para el mensaje o las barras */
    display: flex;
    align-items: flex-end; /* Alinea las barras a la parte inferior del contenedor */
    gap: 0.5rem;
    justify-content: space-around;
    padding: 10px 0; /* Espacio superior e inferior */
    flex-grow: 1; 
    height: 100px; /* Altura de referencia */
}

/* ⭐️ NUEVO: Contenedor de cada barra y su etiqueta ⭐️ */
.bar-column {
    display: flex;
    flex-direction: column; /* Apila los elementos verticalmente */
    align-items: center; /* Centra la barra y la etiqueta horizontalmente */
    width: 40px; /* Ancho fijo para cada columna de barra */
    text-align: center;
}

.bar-label {
    font-size: 0.7rem;
    color: #666;
    /* Evita que las etiquetas largas causen problemas de alineación */
    white-space: nowrap; 
}

.history-buttons-group {
    /* Contenedor que alinea los dos botones horizontalmente */
    display: flex;
    justify-content: center; /* Centra el grupo de botones dentro del panel */
    gap: 0.5rem; /* Espacio entre los botones */
    margin-top: 0.8rem;
    width: 100%; /* Ocupa el ancho del contenedor centrado */
}

/*.view-history-btn {
    width: 60%;
    padding: 0.5rem;
    background-color: #3b82f6; /* Azul */
    /*color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
    margin-top: 0.5rem; /* Espacio superior */

    /*margin-left: auto; 
    margin-right: auto;
}*/

/* Redefinición de botones para que coexistan */
.save-info-btn,
.view-history-btn {
    padding: 0.5rem 0.8rem;
    background-color: #f7a04c; /* Naranja/Ámbar para Guardar */
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
    width: 45%; /* Cada botón ocupa casi la mitad del espacio */
    max-width: 180px; 
    transition: background-color 0.3s;
}

.view-history-btn {
    background-color: #3b82f6; /* Azul para Ver Historial */
}

.save-info-btn:hover {
    background-color: #e58d3f;
}

.view-history-btn:hover {
    background-color: #2c73d9;
}

/* Estilo para el mensaje "No disponible" */
.no-history-message {
    text-align: center;
    color: #999;
    font-style: italic;
    padding: 1rem;
    height: 100%;
}

.calorie-tooltip {
    /* Posicionamiento absoluto y alto z-index para que flote sobre todo */
    position: fixed; /* O 'absolute' si el contenedor principal tiene position: relative */
    z-index: 1000;
    
    /* Estilos visuales */
    background-color: #60be6d;
    color: white;
    padding: 0.5rem 0.8rem;
    border-radius: 4px;
    font-size: 0.8rem;
    pointer-events: none; /* Crucial: permite interactuar con los elementos debajo */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.calorie-tooltip p {
    margin: 0;
    line-height: 1.2;
}

/* ------------------ BUSCADOR Y REGISTRO ------------------ */
.food-entry-panel {
    grid-column: 1; /* Ocupa la primera columna */
    grid-row: 2; /* Fila 2 */

    position: relative; /* CRÍTICO para que .search-results-wrapper (absolute) funcione */
}

.search-results-wrapper {
    /*position: absolute;*/
    /*width: 65%;*/       
    z-index: 99;      
    top: 100%; 
    width: 100%;
    /* ⭐️ CRÍTICO: El left/right para que ocupe el 100% de la columna ⭐️ */
    left: 0;
    right: 0;
}

/* NUEVA CLASE: Contenedor para el Input y el Botón de Añadir */
.search-input-group {
    display: flex; /* Habilita flexbox para alinear elementos */
    gap: 0.5rem;   /* Espacio entre el input y el botón */
    margin-top: 0.5rem;

     position: static; 
    z-index: 101; /* Asegura que input/botón estén en la capa superior */
}

.food-search-input {
    width: 100%;
    padding: 0.6rem;
    margin-top: 0.5rem;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.add-food-btn {
    padding: 0.6rem 1rem;
    background-color: #10b981; /* Verde */
    color: white;
    font-weight: bold;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: opacity 0.3s;
    /* Evita que el botón cambie de tamaño al cargarse */
    white-space: nowrap; 
}

/* Estilo para el botón deshabilitado */
.add-food-btn.disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.search-results-list {
    list-style: none;
    padding: 0;
    margin: 0.5rem 0;
    border: 1px solid #eee;
    border-radius: 4px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);

    /* ⭐️ RESTRICCIÓN DE ALTURA Y SCROLL ⭐️ */
    max-height: 130px; /* Altura máxima para unas 5 a 6 opciones */
    overflow-y: auto; /* Activa el scroll interno */
}

.search-results-list li {
    padding: 0.5rem;
    cursor: pointer;
    border-bottom: 1px solid #eee;
}

.consumed-list {
    margin-top: 1rem;
    padding: 0;
    list-style: none;

    /* ⭐️ RESTRICCIÓN DE ALTURA Y SCROLL ⭐️ */
    max-height: 140px; /* Ajusta este valor (ej. 200px = ~4 o 5 filas) */
    overflow-y: auto; /* Activa el scroll vertical cuando excede max-height */
}

.consumed-item {
    display: flex; /* Habilita flexbox para alinear contenido */
    justify-content: space-between; /* Empuja el botón de eliminar a la derecha */
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid #eee;
}

.consumed-info {
    /* Permite que la información del alimento crezca si es necesario */
    flex-grow: 1; 
    margin-right: 1rem; /* Deja un espacio entre el texto y el botón */
}

.delete-btn {
    background: none;
    border: none;
    color: #cc0000; /* Color rojo para el ícono de eliminar */
    cursor: pointer;
    font-size: 1rem;
    padding: 0.2rem;
    /* Asegura que el botón se mantenga a la derecha */
    flex-shrink: 0; 
}

/* ------------------ MENSAJES MOTIVACIONALES ------------------ */
.message-panel {
    grid-column: 2;
    grid-row: 2;
    display: flex;
    align-items: center;
    justify-content: center;
}

.motivational-text {
    font-style: italic;
    color: #444;
}


/* DARK MODE */

/* ⭐️ MODO OSCURO: Invierte colores de la tarjeta y texto ⭐️ */
body.dark-mode .dashboard-card {
    background-color: #0F172A; /* Fondo de tarjeta oscuro */
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
}

body.dark-mode .dashboard-card span,
body.dark-mode .dashboard-card h2,
body.dark-mode .dashboard-card h3 {
    color: #E6EEF8 !important;
}

/* PANELES INDIVIDUALES */

/* ⭐️ MODO OSCURO: Paneles Internos y Bordes ⭐️ */
body.dark-mode .summary-panel,
body.dark-mode .history-panel,
body.dark-mode .food-entry-panel,
body.dark-mode .macro-panel,
body.dark-mode .message-panel {
    background-color: #1F2A37; /* Fondo del panel ligeramente más claro que el fondo principal */
    border: 1px solid #1F2A37;
    box-shadow: rgba(2, 6, 23, 0.6);
}

/*ENCABEZADO Y COMPONENTES REUTILIZABLES*/

/* Botones de Icono y Menú */
body.dark-mode .settings-icon-btn,
body.dark-mode .settings-btn {
    color: #E0E0E0;
}

body.dark-mode .settings-icon-btn:hover {
    background-color: #444;
}

body.dark-mode .settings-dropdown {
    background-color: #1e1e1e;
    border-color: #444;
    color: #94A3B8;
}

body.dark-mode .settings-dropdown button{
    color: #94A3B8;
}

body.dark-mode .settings-dropdown button:hover {
    background-color: #3B4958; /* Fondo sutil al pasar el ratón por los ítems del menú */
}

/* Input y Búsqueda */
body.dark-mode .food-search-input {
    background-color: #2c2c2c;
    border-color: #444;
    color: #E0E0E0;
}

body.dark-mode .search-results-list {
    background-color: #2c2c2c;
    color: #94A3B8;
    border-color: #444;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
}

body.dark-mode .search-results-list li {
    border-bottom-color: #444;
}

/* Línea divisora en el resumen */
body.dark-mode .summary-divider {
    background: #444;
}

/* DASHBOARD HEADER */

body.dark-mode .app-title{
    color: #0bb35a; /* Título principal claro */
}

body.dark-mode .settings-dropdown {
    background-color: #1F2A37; /* Fondo del dropdown (Fondo de panel) */
    border: 1px solid #3B4958; /* Borde más visible */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
    color: #94A3B8;
}

body.dark-mode .remaining-kcal-text{
    color: #94A3B8;
}

body.dark-mode .bar{
    background-color: #60a5fa; 
}

body.dark-mode .save-info-btn {
    background-color: #e27a1f;
}

body.dark-mode .view-history-btn {
    background-color: #1067f1; /* Azul para Ver Historial */
}

body.dark-mode .save-info-btn:hover {
    background-color: #b86319;
}

body.dark-mode .view-history-btn:hover {
    background-color: #0e57cc; /* Azul para Ver Historial */
}

/* ======================================= */
/* RESPONSIVE (Menos de 768px) */
/* ======================================= */

@media (max-width: 768px) {
    .dashboard-grid {
        grid-template-columns: 1fr; /* Una sola columna en móvil */
    }
    .history-panel,
    .food-entry-panel,
    .message-panel {
        grid-column: 1; 
    }
}